"å¤„ç†æ–‡æœ¬"
import argparse
import torch
import transformer.Constants as Constants
import json
import math
from time import time
import os
from Util import merge_gram
import sys


def tokenize(line):
    # return list(line)
    # return line.split(" ")
    # words = line.split()
    # line = ''.join(line.split(" "))
    # words = split_lans(line)
    words = merge_gram(line)
    # line = ' '.join(words)
    # words = line.split(" ")
    re = []
    for word in words:
        # if len(word) > 9:  # "13653923571"ç©ºå€¼
        #     continue
        # word=word[:9]  #åˆæœŸä¸è¦å¹²
        if word in [None, "", " "]:
            continue
        re.append(word)
    return re


def token_file(dir, source, target, begin=0, end=sys.maxsize, keep_case=False):
    if end < 0:
        end = sys.maxsize
    print("token_fileåˆ†è¯", os.path.abspath(source), "å°†å†™å…¥", os.path.abspath(target))
    counter = {}
    f1 = open(source, "r", encoding="utf-8")
    f2 = open(target, "w", encoding="utf-8")
    line = f1.readline()
    print("ç¬¬ä¸€æ¡", line)
    i = 0
    while (line):
        i += 1
        if i < begin:
            continue
        if i > end:
            break
        if not keep_case:
            line = line.lower()
        tokens = tokenize(line)

        # ç»Ÿè®¡è¯é¢‘,ç¬¬ä¸€æ®µå•†å“ç¼–ç åº”è¯¥å»é™¤
        for token in tokens[2:]:
            if token in counter:
                counter[token] += 1
            else:
                counter[token] = 1

        tokens = " ".join(tokens)  # è‡ªå¸¦"\n"
        f2.write(tokens)
        if i % 100000 == 0:
            print("ç¬¬", i, "è¡Œ", line, "--->", tokens)
            print("å·²ç»Ÿè®¡è¯é¢‘", len(counter))
        line = f1.readline()
    f1.close()
    f2.close()
    print(source, "å·²å…¨éƒ¨åˆ†è¯è‡³", target)
    counter = dict(sorted(counter.items(), key=lambda kv: kv[1], reverse=True))

    with open(dir + "/counter.json", "w", encoding="utf-8") as f:  # ç‰¹æ®Šå­—ç¬¦æœ‰é—®é¢˜ï¼Œä»…ä¾›äººç±»é˜…è¯»
        json.dump(counter, f, ensure_ascii=False)
    torch.save(counter, dir + "/counter.bin")
    print("è¯é¢‘æ–‡ä»¶å·²ç»å†™å…¥", dir + "/vocab.json", dir + "/vocab.bin")


def build_vocab_idx(word_count, min_word_count, max_words=100000):
    ''' Trim vocab by number of occurence '''
    print('[Info] åŸå§‹è¯åº“ =', len(word_count))

    word2idx = {
        Constants.BOS_WORD: Constants.BOS,
        Constants.EOS_WORD: Constants.EOS,
        Constants.PAD_WORD: Constants.PAD,
        Constants.UNK_WORD: Constants.UNK}

    # print("è¯é¢‘", word_count)
    ignored_word_count = 0
    for word, count in word_count.items():
        if len(word2idx) >= max_words:
            print("[!]è¯å…¸å·²æ»¡", len(word2idx))
            break
        if len(word) > 7:
            continue
        if word not in word2idx:
            if count >= min_word_count:
                word2idx[word] = len(word2idx)
            else:
                ignored_word_count += 1

    frequency = {}
    for word, idx in word2idx.items():
        if idx < 4:
            frequency[idx] = -1
        elif word in word_count:
            frequency[idx] = math.sqrt(word_count[word])

    print('[Info] é¢‘ç¹å­—å…¸å¤§å° = {},'.format(len(word2idx)), 'æœ€ä½é¢‘æ•° = {}'.format(min_word_count))
    print("[Info] å¿½ç•¥ç½•è¯æ•° = {}".format(ignored_word_count), "çˆ†è¡¨è¯æ±‡æ•°", len(word_count) - max_words)
    return word2idx, frequency


def count_file():
    # dir = "../data/tb"
    # dir = "../data/qa_data"
    # dir = "data"
    dir = "../data/jd/big"

    dir = "../data/jd"

    source = dir + "/full.skuqa"
    target = "C:/Intel" + "/tokenized.skuqa"  # æœ€å¥½åˆ†å¼€ç£ç›˜ï¼Œé€Ÿåº¦æ²¡å•¥å˜åŒ–ï¼Œ3.5m/s
    token_file(dir=dir, source=source, target=target)


def main():
    dir = "../data/jd"

    parser = argparse.ArgumentParser()
    parser.add_argument('-save_dir', default=dir)
    parser.add_argument('-counter_path', default=dir + "/counter.bin")
    parser.add_argument('-max_len', '--max_word_seq_len', type=int, default=20)
    parser.add_argument('-min_word_count', type=int, default=20)
    parser.add_argument('-keep_case', action='store_true', default=False)
    parser.add_argument('-share_vocab', action='store_true', default=True)
    parser.add_argument('-vocab', default=None)
    args = parser.parse_args()
    args.max_token_seq_len = args.max_word_seq_len + 2  # include the <s> and </s>

    word_count = torch.load(args.counter_path)
    word2idx, frequency = build_vocab_idx(word_count=word_count, min_word_count=args.min_word_count)
    vocab = {
        'settings': vars(args),
        'dict': {
            'src': word2idx,
            'tgt': word2idx,
            'ctx': word2idx,
            'frequency': frequency
        }}

    path = args.save_dir + "/reader.json"
    with open(path, "w", encoding="utf-8") as f:  # ç‰¹æ®Šå­—ç¬¦æœ‰é—®é¢˜ï¼Œä»…ä¾›äººç±»é˜…è¯»
        json.dump(vocab, f, ensure_ascii=False)

    path = args.save_dir + "/reader.data"
    print('[Info] ä¿å­˜è¯æ±‡åˆ°', os.path.abspath(path))
    torch.save(vocab, path)


if __name__ == '__main__':
    t0 = time()
    # count_file()
    main()
    print(time() - t0, "ç§’å®Œæˆvocab.py")

'''
token_fileåˆ†è¯ D:\code\data\jd\full.skuqa å°†å†™å…¥ C:\Intel\tokenized.skuqa
ç¬¬ä¸€æ¡ skuid 	 attributes 	 review  	 counter 	 question 	 answer
ç¬¬ 100000 è¡Œ 1077731041890	ã€æ»¨æµ·é¦†ã€‘è™¾é…±éº»è™¾é…±æ‹Œé¢é…±ä¸‹é¥­èœæµ·é²œé…±ç›åŸç‰¹äº§èœ¢å­è™¾é…±170g/ç“¶è°ƒå‘³å“ç²®æ²¹è°ƒå‘³é£Ÿå“é¥®æ–™	å¾ˆå–œæ¬¢å“¦ï½ï½å¾ˆä¸é”™çš„ä¸œè¥¿ï½	1	å’¸ä¸å’¸ï¼Ÿæˆ‘è®°å¾—åº”è¯¥ä¸å’¸å§	ä¸æ˜¯å¾ˆé—²ï¼Œæ­£å¥½å§ã€‚
 ---> 1077731041890 	 ã€ æ»¨ æµ· é¦† ã€‘ è™¾ é…± éº» è™¾ é…± æ‹Œ é¢ é…± ä¸‹ é¥­ èœ æµ· é²œ é…± ç› åŸ ç‰¹ äº§ èœ¢ å­ è™¾ é…± 170 g / ç“¶ è°ƒ å‘³ å“ ç²® æ²¹ è°ƒ å‘³ é£Ÿ å“ é¥® æ–™ 	 å¾ˆ å–œ æ¬¢ å“¦ ï½ ï½ å¾ˆ ä¸ é”™ çš„ ä¸œ è¥¿ ï½ 	 1 	 å’¸ ä¸ å’¸ ï¼Ÿ æˆ‘ è®° å¾— åº” è¯¥ ä¸ å’¸ å§ 	 ä¸ æ˜¯ å¾ˆ é—² ï¼Œ æ­£ å¥½ å§ ã€‚ 
ç¬¬ 200000 è¡Œ 169458848	æŠ€å˜‰(gigabyte)geforce gtx 1050ti oc 1316-1430mhz/7008mhz 4g/128bitæ¸¸æˆæ˜¾å¡æ˜¾å¡ç”µè„‘é…ä»¶ç”µè„‘ã€åŠå…¬	å¾ˆçƒ¦å¿ƒçš„ä¸ªæ˜¾å¡ï¼Œç”¨äº†å‡ å¤©å°±åäº†ï¼Œé€€ä¸äº†ï¼Œåˆæ¢ä¸äº†ï¼Œçƒ¦å•Š	5	1050tiåƒé¸¡é è°±å—ï¼Ÿç°åœ¨ä¸€æ–¯é›¾ä¹ï¼Œè¿™ä¸ªè½¦èƒ½å¼€å—	èƒ½ï¼Œæœ€å¥½1060
 ---> 169458848 	 æŠ€ å˜‰ ( gigabyte ) geforce gtx 1050 ti oc 1316 - 1430 mhz / 7008 mhz 4 g / 128 bit æ¸¸ æˆ æ˜¾ å¡ æ˜¾ å¡ ç”µ è„‘ é… ä»¶ ç”µ è„‘ ã€ åŠ å…¬ 	 å¾ˆ çƒ¦ å¿ƒ çš„ ä¸ª æ˜¾ å¡ ï¼Œ ç”¨ äº† å‡  å¤© å°± å äº† ï¼Œ é€€ ä¸ äº† ï¼Œ åˆ æ¢ ä¸ äº† ï¼Œ çƒ¦ å•Š 	 5 	 1050 ti åƒ é¸¡ é  è°± å— ï¼Ÿ ç° åœ¨ ä¸€ æ–¯ é›¾ ä¹ ï¼Œ è¿™ ä¸ª è½¦ èƒ½ å¼€ å— 	 èƒ½ ï¼Œ æœ€ å¥½ 1060 
ç¬¬ 300000 è¡Œ 1217372566652	å—æäºº çŸ­è¢–tæ¤å¥³2018å¤å­£æ–°æ¬¾éŸ©ç‰ˆå®½æ¾å¤§ç å¥³å£«æ‰“åº•ä¸Šè¡£å­—æ¯å°èŠ±æ—¶å°šä½“æ¤ as062tæ¤å¥³è£…æœé¥°å†…è¡£	ç‰©æµä¸é”™ï¼Œç‰©æµé€Ÿåº¦æŒºå¿«çš„ï¼Œå¾ˆå¥½çš„ä¸€æ¬¡è´­ç‰©	17	æ˜¯æ£‰çš„å—ï¼Ÿ	æ˜¯æ£‰çš„ï¼Œä¸Šèº«å¯èˆ’æœäº†ï¼Œå–œæ¬¢
 ---> 1217372566652 	 å— æ äºº çŸ­ è¢– t æ¤ å¥³ 2018 å¤ å­£ æ–° æ¬¾ éŸ© ç‰ˆ å®½ æ¾ å¤§ ç  å¥³ å£« æ‰“ åº• ä¸Š è¡£ å­— æ¯ å° èŠ± æ—¶ å°š ä½“ æ¤ as 062 t æ¤ å¥³ è£… æœ é¥° å†… è¡£ 	 ç‰© æµ ä¸ é”™ ï¼Œ ç‰© æµ é€Ÿ åº¦ æŒº å¿« çš„ ï¼Œ å¾ˆ å¥½ çš„ ä¸€ æ¬¡ è´­ ç‰© 	 17 	 æ˜¯ æ£‰ çš„ å— ï¼Ÿ 	 æ˜¯ æ£‰ çš„ ï¼Œ ä¸Š èº« å¯ èˆ’ æœ äº† ï¼Œ å–œ æ¬¢ 
ç¬¬ 400000 è¡Œ 1214629215363	æ—¶åŸŸæ–°æ¬¾å‡ä¸¤ä»¶å¼¹åŠ›é€Ÿå¹²ç´§èº«è¿åŠ¨è·‘æ­¥ç‘œä¼½é»‘æ¡ƒå¿ƒå¥èº«æˆ¿é•¿è£¤å¥³æ˜¥ç§‹è¿åŠ¨è£¤è¿åŠ¨æœé¥°è¿åŠ¨æˆ·å¤–	è¿™ä¸ªè¡£æœç©¿ç€ç¾ç¾å“’ï¼Œè¿åŠ¨ä¹Ÿæ–¹ä¾¿ï¼Œå¥½å–œæ¬¢	1	è¿™ä¸ªä¼šä¸ä¼šæ‰è‰²å•Šï¼Ÿ	è›®å¥½çš„ï¼Œæ²¡æœ‰è¿™ä¸ªç°è±¡ï¼Œæœ‰ç‚¹å°æ€§æ„Ÿ
 ---> 1214629215363 	 æ—¶ åŸŸ æ–° æ¬¾ å‡ ä¸¤ ä»¶ å¼¹ åŠ› é€Ÿ å¹² ç´§ èº« è¿ åŠ¨ è·‘ æ­¥ ç‘œ ä¼½ é»‘ æ¡ƒ å¿ƒ å¥ èº« æˆ¿ é•¿ è£¤ å¥³ æ˜¥ ç§‹ è¿ åŠ¨ è£¤ è¿ åŠ¨ æœ é¥° è¿ åŠ¨ æˆ· å¤– 	 è¿™ ä¸ª è¡£ æœ ç©¿ ç€ ç¾ ç¾ å“’ ï¼Œ è¿ åŠ¨ ä¹Ÿ æ–¹ ä¾¿ ï¼Œ å¥½ å–œ æ¬¢ 	 1 	 è¿™ ä¸ª ä¼š ä¸ ä¼š æ‰ è‰² å•Š ï¼Ÿ 	 è›® å¥½ çš„ ï¼Œ æ²¡ æœ‰ è¿™ ä¸ª ç° è±¡ ï¼Œ æœ‰ ç‚¹ å° æ€§ æ„Ÿ 
ç¬¬ 500000 è¡Œ 491638750836	ä¹è§†è¶…çº§ç”µè§† è¶…4 x50 pro 50è‹±å¯¸ rgbçœŸ4kè¶…é«˜æ¸…æ¶²æ™¶3då±å¹•ï¼ˆæ ‡é…æŒ‚æ¶ï¼‰å¹³æ¿ç”µè§†å¤§ å®¶ ç”µå®¶ç”¨ç”µå™¨	ç”µè§†å¾ˆå¥½ ååº”å¿«  åŠŸèƒ½å¤š å†…å­˜ä¹Ÿå¤§ å€¼äº†	4	èƒ½å»é™¤å¼€æœºå¹¿å‘Šå—	ä¸èƒ½
 ---> 491638750836 	 ä¹ è§† è¶… çº§ ç”µ è§† è¶… 4 x 50 pro 50 è‹± å¯¸ rgb çœŸ 4 k è¶… é«˜ æ¸… æ¶² æ™¶ 3 d å± å¹• ï¼ˆ æ ‡ é… æŒ‚ æ¶ ï¼‰ å¹³ æ¿ ç”µ è§† å¤§ å®¶ ç”µ å®¶ ç”¨ ç”µ å™¨ 	 ç”µ è§† å¾ˆ å¥½ å åº” å¿« åŠŸ èƒ½ å¤š å†… å­˜ ä¹Ÿ å¤§ å€¼ äº† 	 4 	 èƒ½ å» é™¤ å¼€ æœº å¹¿ å‘Š å— 	 ä¸ èƒ½ 
ç¬¬ 600000 è¡Œ 477021908192	ä¸€æ¯é¦™èŒ¶å¶ 2018æ–°èŒ¶æ˜å‰é¾™äº•èŒ¶ ç»¿èŒ¶èŒ¶å¶ä¹°1é€1å…±200å…‹è£…èŒ¶å¶æ˜å‰ç»¿èŒ¶æ•£è£…æµ“é¦™ç¤¼ç›’è£…é¾™äº•èŒ—èŒ¶é£Ÿå“é¥®æ–™	æŒºå¥½çš„ï¼Œå–å®Œè¿˜ä¼šå›è´­çš„ï¼	173	æœ‰ä¹°è¿‡æ–°ä¸Šå¸‚çš„èŒ¶çš„æœ‹å‹å—ï¼Ÿæ˜¯è¦é²œå«©å¥½å–ä¸€ç‚¹å—ï¼Ÿ	å¥½
 ---> 477021908192 	 ä¸€ æ¯ é¦™ èŒ¶ å¶ 2018 æ–° èŒ¶ æ˜ å‰ é¾™ äº• èŒ¶ ç»¿ èŒ¶ èŒ¶ å¶ ä¹° 1 é€ 1 å…± 200 å…‹ è£… èŒ¶ å¶ æ˜ å‰ ç»¿ èŒ¶ æ•£ è£… æµ“ é¦™ ç¤¼ ç›’ è£… é¾™ äº• èŒ— èŒ¶ é£Ÿ å“ é¥® æ–™ 	 æŒº å¥½ çš„ ï¼Œ å– å®Œ è¿˜ ä¼š å› è´­ çš„ ï¼ 	 173 	 æœ‰ ä¹° è¿‡ æ–° ä¸Š å¸‚ çš„ èŒ¶ çš„ æœ‹ å‹ å— ï¼Ÿ æ˜¯ è¦ é²œ å«© å¥½ å– ä¸€ ç‚¹ å— ï¼Ÿ 	 å¥½ 
ç¬¬ 700000 è¡Œ 280009731	é¬¼å¡šè™ï¼ˆonitsuka tigerï¼‰ä¸­æ€§æ¬¾  ä¼‘é—²é‹ serrano    d109l-0142 ç™½è‰²ä¼‘é—²é‹è¿åŠ¨é‹åŒ…è¿åŠ¨æˆ·å¤–	ä¸€èˆ¬èˆ¬	1	ç”·å¥³åŒæ¬¾å—	å¯¹ï¼Œä¸­æ€§æ¬¾ï¼Œç”·å¥³ä¸€æ ·
 ---> 280009731 	 é¬¼ å¡š è™ ï¼ˆ onitsuka tiger ï¼‰ ä¸­ æ€§ æ¬¾ ä¼‘ é—² é‹ serrano d 109 l - 0142 ç™½ è‰² ä¼‘ é—² é‹ è¿ åŠ¨ é‹ åŒ… è¿ åŠ¨ æˆ· å¤– 	 ä¸€ èˆ¬ èˆ¬ 	 1 	 ç”· å¥³ åŒ æ¬¾ å— 	 å¯¹ ï¼Œ ä¸­ æ€§ æ¬¾ ï¼Œ ç”· å¥³ ä¸€ æ · 
ç¬¬ 800000 è¡Œ 236454771	é‡‘å£«é¡¿ï¼ˆkingstonï¼‰dt se9h 32gb uç›˜ ä¸ªæ€§åŒ– è‡ªå®šä¹‰å®šåˆ¶ é‡‘å±è½¦è½½uç›˜uç›˜å¤–è®¾äº§å“ç”µè„‘ã€åŠå…¬	å¾ˆå¥½ï¼Œç‰©æµå¾ˆå¿«ï¼Œä¸“ä¸šåˆ»å­—å¾ˆå¥½	11	å¯ä»¥åˆ»å­—å—	å¯ä»¥åˆ»å­—
 ---> 236454771 	 é‡‘ å£« é¡¿ ï¼ˆ kingston ï¼‰ dt se 9 h 32 gb u ç›˜ ä¸ª æ€§ åŒ– è‡ª å®š ä¹‰ å®š åˆ¶ é‡‘ å± è½¦ è½½ u ç›˜ u ç›˜ å¤– è®¾ äº§ å“ ç”µ è„‘ ã€ åŠ å…¬ 	 å¾ˆ å¥½ ï¼Œ ç‰© æµ å¾ˆ å¿« ï¼Œ ä¸“ ä¸š åˆ» å­— å¾ˆ å¥½ 	 11 	 å¯ ä»¥ åˆ» å­— å— 	 å¯ ä»¥ åˆ» å­— 
ç¬¬ 900000 è¡Œ 220509135	apple ipad å¹³æ¿ç”µè„‘ 9.7è‹±å¯¸ï¼ˆ128g wlanç‰ˆ/a9 èŠ¯ç‰‡/retinaæ˜¾ç¤ºå±/touch idæŠ€æœ¯ mp2h2ch/aï¼‰æ·±ç©ºç°è‰²å¹³æ¿ç”µè„‘ç”µè„‘æ•´æœºç”µè„‘ã€åŠå…¬	ä½œä¸ºå…¥é—¨çº§çš„å¤‡ç”¨å…¨å°ºå¯¸ipadï¼Œipadï¼ˆ2017ï¼‰ä¸å¤±ä¸ºä¸€ä¸ªç»æµå®æƒ çš„é€‰æ‹©ï¼Œç”µæ± ç»­èˆªèƒ½åŠ›é«˜ï¼Œretinaå±å¹•æ˜¾ç¤ºæ¸…æ™°ï¼Œè™½ç„¶ä¸å¦‚å…¨è´´åˆå±å¹•æ•ˆæœé‚£ä¹ˆè‰³ä¸½ï¼Œä½†å¹³æ—¶çœ‹ä¸ªè§†é¢‘è¯»ä¸ªpdfè¿˜æ˜¯è¶³å¤Ÿçš„ï¼Œå¯¹äºä¸æ˜¯é‡åº¦ä¾èµ–ä½¿ç”¨è€…è¿˜æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œæ¨è~	107	è‹¹æœå“ç‰Œæ—¥ä¼šä¾¿å®œå¾ˆå¤šå—	ä¾¿å®œä¸€ç‚¹ç‚¹ï¼Œä¸ä¼šè¶…è¿‡200
 ---> 220509135 	 apple ipad å¹³ æ¿ ç”µ è„‘ 9 . 7 è‹± å¯¸ ï¼ˆ 128 g wlan ç‰ˆ / a 9 èŠ¯ ç‰‡ / retina æ˜¾ ç¤º å± / touch id æŠ€ æœ¯ mp 2 h 2 ch / a ï¼‰ æ·± ç©º ç° è‰² å¹³ æ¿ ç”µ è„‘ ç”µ è„‘ æ•´ æœº ç”µ è„‘ ã€ åŠ å…¬ 	 ä½œ ä¸º å…¥ é—¨ çº§ çš„ å¤‡ ç”¨ å…¨ å°º å¯¸ ipad ï¼Œ ipad ï¼ˆ 2017 ï¼‰ ä¸ å¤± ä¸º ä¸€ ä¸ª ç» æµ å® æƒ  çš„ é€‰ æ‹© ï¼Œ ç”µ æ±  ç»­ èˆª èƒ½ åŠ› é«˜ ï¼Œ retina å± å¹• æ˜¾ ç¤º æ¸… æ™° ï¼Œ è™½ ç„¶ ä¸ å¦‚ å…¨ è´´ åˆ å± å¹• æ•ˆ æœ é‚£ ä¹ˆ è‰³ ä¸½ ï¼Œ ä½† å¹³ æ—¶ çœ‹ ä¸ª è§† é¢‘ è¯» ä¸ª pdf è¿˜ æ˜¯ è¶³ å¤Ÿ çš„ ï¼Œ å¯¹ äº ä¸ æ˜¯ é‡ åº¦ ä¾ èµ– ä½¿ ç”¨ è€… è¿˜ æ˜¯ æ¯” è¾ƒ å® ç”¨ çš„ ï¼Œ æ¨ è ~ 	 107 	 è‹¹ æœ å“ ç‰Œ æ—¥ ä¼š ä¾¿ å®œ å¾ˆ å¤š å— 	 ä¾¿ å®œ ä¸€ ç‚¹ ç‚¹ ï¼Œ ä¸ ä¼š è¶… è¿‡ 200 
ç¬¬ 1000000 è¡Œ 70305717516	ä¸‹å•ç«‹å‡25 è‹±å›½magç¾Šå¥¶ç²‰ å¹¼çŠ¬æˆçŠ¬ç‹—ç‹—ç¾Šå¥¶ç²‰çŒ«å’ªå¹¼çŒ«æˆçŒ«ç¾Šå¥¶ç²‰ç›Šç”ŸèŒé…æ–¹ä»£æ¯ä¹³400gå¥¶ç²‰åŒ»ç–—ä¿å¥å® ç‰©ç”Ÿæ´»	ä¸é”™	9	åŠå²è¨æ‘©ï¼Œå–æ€ä¹ˆæ ·ã€‚è¦ç»™å¤šå°‘é‡ï¼Œå¤šå°‘æ°´	åŠå²æœ‰ç‚¹å¤§å•¦ï¼Œè€Œä¸”ç¾Šå¥¶ç²‰è¦å°‘å–ï¼Œä¸Šç«çš„ä¸œè¥¿
 ---> 70305717516 	 ä¸‹ å• ç«‹ å‡ 25 è‹± å›½ mag ç¾Š å¥¶ ç²‰ å¹¼ çŠ¬ æˆ çŠ¬ ç‹— ç‹— ç¾Š å¥¶ ç²‰ çŒ« å’ª å¹¼ çŒ« æˆ çŒ« ç¾Š å¥¶ ç²‰ ç›Š ç”Ÿ èŒ é… æ–¹ ä»£ æ¯ ä¹³ 400 g å¥¶ ç²‰ åŒ» ç–— ä¿ å¥ å®  ç‰© ç”Ÿ æ´» 	 ä¸ é”™ 	 9 	 åŠ å² è¨ æ‘© ï¼Œ å– æ€ ä¹ˆ æ · ã€‚ è¦ ç»™ å¤š å°‘ é‡ ï¼Œ å¤š å°‘ æ°´ 	 åŠ å² æœ‰ ç‚¹ å¤§ å•¦ ï¼Œ è€Œ ä¸” ç¾Š å¥¶ ç²‰ è¦ å°‘ å– ï¼Œ ä¸Š ç« çš„ ä¸œ è¥¿ 
ç¬¬ 1100000 è¡Œ 284521531	å°ç±³(mi) air 12.5è‹±å¯¸é‡‘å±è¶…è½»è–„ç¬”è®°æœ¬ç”µè„‘(core m-7y30 4g 128g å…¨é«˜æ¸…å± èƒŒå…‰é”®ç›˜ win10æ­£ç‰ˆoffice)é“¶ç¬”è®°æœ¬ç”µè„‘æ•´æœºç”µè„‘ã€åŠå…¬	æ²¡é€ä»€ä¹ˆé…ä»¶ï¼Œç”µè„‘è¿˜ä¸é”™ï¼Œç‰©æœ‰æ‰€å€¼	325	æ˜¯ä¸æ˜¯ä¸è¿ç½‘å°±ä¸ä¼šè¢«æ¿€æ´»ï¼Ÿåœ¨è”ç½‘çš„çŠ¶æ€ä¸‹æ˜¯è‡ªåŠ¨æ¿€æ´»è¿˜æ˜¯è¦è‡ªå·±æ“ä½œçš„ï¼Ÿè¿™æ¿€æ´»æŒ‡çš„æ˜¯windowç³»ç»Ÿå§ï¼Ÿæˆ‘æ˜¯æ€•è«åè¢«æ¿€æ´»æ²¡æ³•æ— ç†ç”±é€€è´§äº†ã€‚	è”ç½‘è‡ªåŠ¨æ¿€æ´»
 ---> 284521531 	 å° ç±³ ( mi ) air 12 . 5 è‹± å¯¸ é‡‘ å± è¶… è½» è–„ ç¬” è®° æœ¬ ç”µ è„‘ ( core m - 7 y 30 4 g 128 g å…¨ é«˜ æ¸… å± èƒŒ å…‰ é”® ç›˜ win 10 æ­£ ç‰ˆ office ) é“¶ ç¬” è®° æœ¬ ç”µ è„‘ æ•´ æœº ç”µ è„‘ ã€ åŠ å…¬ 	 æ²¡ é€ ä»€ ä¹ˆ é… ä»¶ ï¼Œ ç”µ è„‘ è¿˜ ä¸ é”™ ï¼Œ ç‰© æœ‰ æ‰€ å€¼ 	 325 	 æ˜¯ ä¸ æ˜¯ ä¸ è¿ ç½‘ å°± ä¸ ä¼š è¢« æ¿€ æ´» ï¼Ÿ åœ¨ è” ç½‘ çš„ çŠ¶ æ€ ä¸‹ æ˜¯ è‡ª åŠ¨ æ¿€ æ´» è¿˜ æ˜¯ è¦ è‡ª å·± æ“ ä½œ çš„ ï¼Ÿ è¿™ æ¿€ æ´» æŒ‡ çš„ æ˜¯ window ç³» ç»Ÿ å§ ï¼Ÿ æˆ‘ æ˜¯ æ€• è« å è¢« æ¿€ æ´» æ²¡ æ³• æ—  ç† ç”± é€€ è´§ äº† ã€‚ 	 è” ç½‘ è‡ª åŠ¨ æ¿€ æ´» 
ç¬¬ 1200000 è¡Œ 301381771	oppo a73 é«˜é…ç‰ˆ å…¨é¢å±æ‹ç…§æ‰‹æœº 4gb+64gb é»‘è‰² å…¨ç½‘é€š ç§»åŠ¨è”é€šç”µä¿¡4g åŒå¡åŒå¾…æ‰‹æœºæ‰‹æœºæ‰‹æœºé€šè®¯æ‰‹æœº	æä¸æ‡‚ä¸€ä¸ªæ‰‹æœºæ‰‹ç”µç­’è®¾è®¡é‚£ä¹ˆéº»çƒ¦ï¼Œè¿˜è¦åœ¨è®¾ç½®é‡Œæ‰¾ï¼ŒçœŸä½©æœopp0ç‹—å±è®¾è®¡ç†å¿µğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡	97	æ‰‹æœºå†…ç½®ç³»ç»Ÿå¤šå—ï¼Ÿ	ä¸å¤šï¼Œ
 ---> 301381771 	 oppo a 73 é«˜ é… ç‰ˆ å…¨ é¢ å± æ‹ ç…§ æ‰‹ æœº 4 gb + 64 gb é»‘ è‰² å…¨ ç½‘ é€š ç§» åŠ¨ è” é€š ç”µ ä¿¡ 4 g åŒ å¡ åŒ å¾… æ‰‹ æœº æ‰‹ æœº æ‰‹ æœº é€š è®¯ æ‰‹ æœº 	 æ ä¸ æ‡‚ ä¸€ ä¸ª æ‰‹ æœº æ‰‹ ç”µ ç­’ è®¾ è®¡ é‚£ ä¹ˆ éº» çƒ¦ ï¼Œ è¿˜ è¦ åœ¨ è®¾ ç½® é‡Œ æ‰¾ ï¼Œ çœŸ ä½© æœ opp 0 ç‹— å± è®¾ è®¡ ç† å¿µ ğŸ˜¡ ğŸ˜¡ ğŸ˜¡ ğŸ˜¡ 	 97 	 æ‰‹ æœº å†… ç½® ç³» ç»Ÿ å¤š å— ï¼Ÿ 	 ä¸ å¤š ï¼Œ 
ç¬¬ 1300000 è¡Œ 229142459	å®‰å°”é›…ï¼ˆaneryaï¼‰ç®€æ˜“è¡£æŸœ æˆäººæ”¶çº³æŸœéå¸ƒè‰ºé’¢æ¶å¡‘æ–™ç»„è£…å•åŒäººå‚¨ç‰©è¡£æŸœè¡£æ©±ç®€æ˜“è¡£æŸœå§å®¤å®¶å…·å®¶å…·	çœŸçš„å¾ˆå¥½ï¼Œæ¼‚äº®æ—¶å°š	6	é—¨èƒ½ä¸èƒ½å…³ä¸¥ä¼šä¸ä¼šè¢«ç¼éš™	ä¼šæœ‰ä¸€ç‚¹ç¼çš„
 ---> 229142459 	 å®‰ å°” é›… ï¼ˆ anerya ï¼‰ ç®€ æ˜“ è¡£ æŸœ æˆ äºº æ”¶ çº³ æŸœ é å¸ƒ è‰º é’¢ æ¶ å¡‘ æ–™ ç»„ è£… å• åŒ äºº å‚¨ ç‰© è¡£ æŸœ è¡£ æ©± ç®€ æ˜“ è¡£ æŸœ å§ å®¤ å®¶ å…· å®¶ å…· 	 çœŸ çš„ å¾ˆ å¥½ ï¼Œ æ¼‚ äº® æ—¶ å°š 	 6 	 é—¨ èƒ½ ä¸ èƒ½ å…³ ä¸¥ ä¼š ä¸ ä¼š è¢« ç¼ éš™ 	 ä¼š æœ‰ ä¸€ ç‚¹ ç¼ çš„ 
ç¬¬ 1400000 è¡Œ 320560693	å°ç±³ï¼ˆmiï¼‰å°ç±³è“ç‰™é¡¹åœˆè€³æœº ç°è‰² åŠ¨åœˆ+åŠ¨é“ åŒå•å…ƒå‘å£°è€³æœº/è€³éº¦å½±éŸ³å¨±ä¹æ•°ç 	æ­¤ç”¨æˆ·æœªå¡«å†™è¯„ä»·å†…å®¹	52	é¡¹åœˆåè¿‡æ¥æˆ´èƒ½ä¸èƒ½æ­£å¸¸ç”¨	å¯ä»¥
 ---> 320560693 	 å° ç±³ ï¼ˆ mi ï¼‰ å° ç±³ è“ ç‰™ é¡¹ åœˆ è€³ æœº ç° è‰² åŠ¨ åœˆ + åŠ¨ é“ åŒ å• å…ƒ å‘ å£° è€³ æœº / è€³ éº¦ å½± éŸ³ å¨± ä¹ æ•° ç  	 æ­¤ ç”¨ æˆ· æœª å¡« å†™ è¯„ ä»· å†… å®¹ 	 52 	 é¡¹ åœˆ å è¿‡ æ¥ æˆ´ èƒ½ ä¸ èƒ½ æ­£ å¸¸ ç”¨ 	 å¯ ä»¥ 
ç¬¬ 1500000 è¡Œ 477009100185	å‘¨ç”Ÿç”Ÿ é»„é‡‘(è¶³é‡‘)çˆ±æƒ…å¯†è¯­ç¾½æ¯›é¡¹é“¾ 86820n è®¡ä»·é»„é‡‘é¡¹é“¾é»„é‡‘ç å®é¦–é¥°	å¾ˆå–œæ¬¢ï¼Œä»¥åä¼šç»§ç»­ä¹°åˆ«çš„	1	é“¾å­ç»†ä¸ç»†	è¿˜è¡Œï¼ŒåŠå æŒºé‡çš„
 ---> 477009100185 	 å‘¨ ç”Ÿ ç”Ÿ é»„ é‡‘ ( è¶³ é‡‘ ) çˆ± æƒ… å¯† è¯­ ç¾½ æ¯› é¡¹ é“¾ 86820 n è®¡ ä»· é»„ é‡‘ é¡¹ é“¾ é»„ é‡‘ ç  å® é¦– é¥° 	 å¾ˆ å–œ æ¬¢ ï¼Œ ä»¥ å ä¼š ç»§ ç»­ ä¹° åˆ« çš„ 	 1 	 é“¾ å­ ç»† ä¸ ç»† 	 è¿˜ è¡Œ ï¼Œ åŠ å  æŒº é‡ çš„ 
ç¬¬ 1600000 è¡Œ 64434179	åwhoo æ´¥ç‡äº«çº¢åå‡é¦™å¹³é¢œç³»åˆ—ç¤¼ç›’6ä»¶å¥—315ml ï¼ˆæ°´ä¹³+ç²¾å+é¢éœœï¼‰ç´§è‡´ è¡¥æ°´ ä¿æ¹¿ æŠ¤è‚¤å“ å¥—è£…å¥³ éŸ©å›½è¿›å£å¥—è£…/ç¤¼ç›’é¢éƒ¨æŠ¤è‚¤ç¾å¦†æŠ¤è‚¤	å¥½	17	æƒ³é—®ä¸‹ç”¨è¿‡çš„å°ä»™å¥³ä»¬ï¼š25å²ï¼Œæ•æ„Ÿè‚Œï¼Œå®¹æ˜“é•¿ç—˜å®¹æ˜“å‡ºæ²¹çš®è‚¤è¿˜å¹²ï¼Œé€‚åˆç”¨å“ªä¸ªç³»åˆ—ï¼Ÿ	åæ­£ä¸é€‚åˆè¿™æ¬¾ï¼Œç²‰è‰²é‚£æ¬¾è¿˜è¡Œï¼Œæ€»å¾—æ¥è¯´ï¼Œè¿™ä¸ªç‰Œå­çš„äº§å“ï¼Œä¸æ˜¯å¾ˆé€‚åˆæ²¹æ€§çš®è‚¤ç”¨
 ---> 64434179 	 å whoo æ´¥ ç‡ äº« çº¢ å å‡ é¦™ å¹³ é¢œ ç³» åˆ— ç¤¼ ç›’ 6 ä»¶ å¥— 315 ml ï¼ˆ æ°´ ä¹³ + ç²¾ å + é¢ éœœ ï¼‰ ç´§ è‡´ è¡¥ æ°´ ä¿ æ¹¿ æŠ¤ è‚¤ å“ å¥— è£… å¥³ éŸ© å›½ è¿› å£ å¥— è£… / ç¤¼ ç›’ é¢ éƒ¨ æŠ¤ è‚¤ ç¾ å¦† æŠ¤ è‚¤ 	 å¥½ 	 17 	 æƒ³ é—® ä¸‹ ç”¨ è¿‡ çš„ å° ä»™ å¥³ ä»¬ ï¼š 25 å² ï¼Œ æ• æ„Ÿ è‚Œ ï¼Œ å®¹ æ˜“ é•¿ ç—˜ å®¹ æ˜“ å‡º æ²¹ çš® è‚¤ è¿˜ å¹² ï¼Œ é€‚ åˆ ç”¨ å“ª ä¸ª ç³» åˆ— ï¼Ÿ 	 å æ­£ ä¸ é€‚ åˆ è¿™ æ¬¾ ï¼Œ ç²‰ è‰² é‚£ æ¬¾ è¿˜ è¡Œ ï¼Œ æ€» å¾— æ¥ è¯´ ï¼Œ è¿™ ä¸ª ç‰Œ å­ çš„ äº§ å“ ï¼Œ ä¸ æ˜¯ å¾ˆ é€‚ åˆ æ²¹ æ€§ çš® è‚¤ ç”¨ 
../data/jd/full.skuqa å·²å…¨éƒ¨åˆ†è¯è‡³ C:/Intel/tokenized.skuqa
è¯é¢‘æ–‡ä»¶å·²ç»å†™å…¥ ../data/jd/vocab.json ../data/jd/vocab.bin
319.10114765167236 ç§’å®Œæˆvocab.py

[Info] åŸå§‹è¯åº“ = 74491
[Info] é¢‘ç¹å­—å…¸å¤§å° = 15394, æœ€ä½é¢‘æ•° = 20
[Info] å¿½ç•¥ç½•è¯æ•° = 46307 çˆ†è¡¨è¯æ±‡æ•° -25509
[Info] ä¿å­˜è¯æ±‡åˆ° D:\code\data\jd\reader.data
0.26628804206848145 ç§’å®Œæˆvocab.py
'''
